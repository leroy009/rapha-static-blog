---
import Layout from "../layouts/Layout.astro";

import Hero from "../components/Hero.astro";
import Introduction from "../components/Introduction.astro";
import ServiceOverview from "../components/ServiceOverview.astro";
import WhyChooseUs from "../components/WhyChooseUs.astro";
import CTA from "../components/CTA.astro";
import Blog from "../components/Blog.astro";
import ContactInfo from "../components/ContactInfo.astro";

import { HOMEPAGE_ARTICLE_LIMIT } from "../data/constants";

import { getCollection, type CollectionEntry } from "astro:content";

const allBlogPosts: CollectionEntry<"blog">[] = (
	await await getCollection("blog")
).sort(
	(a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
		b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf(),
);

const latestArticle: CollectionEntry<"blog"> = allBlogPosts[0];

const remainingArticles: CollectionEntry<"blog">[] = allBlogPosts.slice(1);
---

<Layout title="Rapha Wellness Clinic">
	<Hero />
	<Introduction />
	<ServiceOverview />
	<WhyChooseUs />
	<CTA />
	<Blog latestArticle={latestArticle} remainingArticles={remainingArticles} />
	<ContactInfo />
</Layout>
